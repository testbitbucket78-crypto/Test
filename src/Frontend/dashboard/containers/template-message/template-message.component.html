
<div class="row" *ngIf="selectedTab == 0">
    <div class="col p-0">
        <div class="d-flex pb-2 pt-4 main-header-container">
           <div class=" main-headiing-title">Template Message</div>

              <a class="mx-2 gallery-btn" (click)="selectedTab = 1">Gallery</a>

             <div class="mx-2 input-group gf ">

              <input class="form-control" type="text" placeholder="search" name="search" [(ngModel)]="searchText" />

               <img src="../../../../assets/img/search.png">
             </div>

               <div class="mx-2 drop-down-btn">
                <div class="toggle-box" data-bs-toggle="modal" data-bs-target="#filterTemplateModal">
                    <img src="../../../../assets/img/teambox/filter-icon.svg">
                    <span>Filter</span>
             </div>
           </div>

          <button class="mx-2 new-message-btn" data-bs-toggle="modal" data-bs-target="#newTemplateMessage"><img class="mx-1 icon" src="../../../../assets/img/teambox/add.svg" /> New Template</button>	
        </div>
        
        


            <div *ngIf="filteredTemplatesData.length==0" class="template-empty-state">
				<img src="../../../../assets/img/settings/template-empty.png" />
				<h5 class="mt-3">No Template</h5>
            </div>

             <div class="campaigns_section">
                <div *ngIf="filteredTemplatesData.length>0">
                    <div  *ngFor="let item of filteredTemplatesData  | searchfilter:searchText" class="campaigns_section_item" (click)="toggleTemplatesData(item)">
                        <div class="campaigns_section_item_header">
                            <label [style.background]="statusColors[item.status]">{{item.status}}</label>
                            <span>id: {{item.ID}}</span>
                        </div>
                        <p class="pb-2 title">{{item.Header}}</p>
                        <p class="start_time">Created On: <span>{{item.created_at | date:'dd MMM yy, h:mm a'}}</span></p>
                        <p class="start_time">Modified On: <span>{{item.updated_at | date:'dd MMM yy, h:mm a'}}</span></p>
                        <p class="pt-2"><img  class="icon" src="../../../../assets/img/teambox/whatsapp-icon-l.svg" />{{item.Channel}}</p>
                        <div class="campaigns_section_item_statics">
                            <div><p>{{item.Category}}</p><p><span>Category</span></p></div>
                            <div>
                                <div class="d-flex">
                                <img [src]="profilePicture"/><p>{{item.created_By}}</p>
                              </div>
                              <p><span>Created By</span></p>
                            </div>
                         
                        </div>

                    </div>
                </div>

       

                <div *ngIf="showCampaignDetail" class="campaign_detail">
                    <div class="modal-header filtercampaignheader">
                        <div class="modal-header-left">
                        </div>
                        <div class="modal-header-right">
                            <p class="close-box" (click)="toggleTemplatesData(null)"><img src="../../../../assets/img/teambox/icon-close.svg"></p>
                        </div>
                    </div>
    
                    <div class="campaigns_section_item">
                        <div class="campaigns_section_item_header">
                            <label [style.background]="statusColors[templatesMessageData?.status]">{{templatesMessageData?.status}}</label>
                            <span>id: {{templatesMessageData?.ID}}</span>
                        </div>
                        <p class="start_time">Created on: <span>{{templatesMessageData?.created_at | date:'dd MMM yy, h:mm a'}}</span> 
                                              Modified On: <span>{{templatesMessageData?.updated_at | date:'dd MMM yy, h:mm a'}}</span></p>
                        <div class="campaigns_section_user">
                            <div class="d-flex align-items-center"> <img [src]="profilePicture" />
                            <p class="m-0">{{templatesMessageData?.created_By}}</p></div>
                            <p><span>Created By</span></p>
                        </div>
                        <p class="title" >{{templatesMessageData?.Header}}</p>
                        <p><img class="icon" src="../../../../assets/img/teambox/whatsapp-icon-l.svg" />{{templatesMessageData?.Channel}}</p>
                        <div class="d-flex w-100 pb-4 category_section">
                            <div>
                                <p>Category</p>
                                <span>{{templatesMessageData?.Category}}</span>
                            </div>
                            <div>
                                <p>Language</p>
                                <span>{{templatesMessageData?.Language}}</span>
                            </div>
                          
                        </div>
                        <p id="message_head"> Message </p>
                        <div class="message_section">
                            <div *ngIf="templatesMessageData?.media_type == 'image'" class="message_type" [ngStyle]="{'background-image': 'url(' + templatesMessageData?.Links + ')'}"></div>
                            <div *ngIf="templatesMessageData?.media_type == 'video'" class="message_type">
                                <video autoplay muted loop id="video-background">
                                    <source [src]="templatesMessageData?.Links" type="video/mp4">
                                    Your browser does not support HTML5 video.
                                  </video>
                            </div>
                            <div *ngIf="templatesMessageData?.media_type == 'document'" class="message_type">
                                <iframe [src]="templatesMessageData?.Links" width="100%" height="150px"></iframe>

                            </div>
                            <!-- <div class="message_type" [ngStyle]="{'background-image': 'url(' + templatesMessageData?.Links + ')'}"></div> -->
                            <div class="message_data">
                             {{templatesMessageData?.BodyText}}
                            </div>
                            <div class="contact-us">
                                Contact Us
                            </div>
                        </div>
                     </div>
                    <div class="action_section">
                        <button type="button" class="btn" (click)=" copyTemplatesData()"><img src="../../../../assets/img/teambox/copy.svg"></button>
                        <button type="button" class="btn"  data-bs-toggle="modal" data-bs-target="#deleteModal" ><img src="../../../../assets/img/teambox/delete.svg"></button>
                    </div>
                </div>

  </div> 
 

    </div>

</div>

<div *ngIf="selectedTab== 1">

        <div class="d-flex pt-3 align-items-center head-container">
       
                <div class="d-flex flex-grow-1">
                    <div class="back-btn" (click)="selectTab(0)">
                        <img src="../../../../assets/img/profile/previous1.svg" />
                    </div>
                    <div class="main-title">
                        <h4 class="m-0 px-4">Gallery</h4>
                    </div>
                </div>
    
             <div class="mx-2 input-group gf ">

                <input class="form-control" type="text" placeholder="search" name="searchgallery" [(ngModel)]="searchTextGallery" />
  
                 <img src="../../../../assets/img/search.png">
               </div>
                    
               <div class="mx-2 drop-down-btn">
                <div class="toggle-box" data-bs-toggle="modal" data-bs-target="#filterTemplateModal">
                    <img src="../../../../assets/img/teambox/filter-icon.svg">
                    <span>Filter</span>
             </div>
           </div>
            
        </div>

        <div class="pt-3 campaigns_section">

            <div *ngFor="let gallerydata of galleryData  | searchfilter:searchTextGallery" class="px-4 campaigns_section_item" (click)="toggleGalleryData(gallerydata)">
                <div class="gallery_section_item_header">
                    <label [style.background]="statusColors[gallerydata.status]">{{gallerydata.status}}</label>
                </div>
                <p class="pb-2 title">{{gallerydata.Header}}</p>
             
                <div class="campaigns_section_item_statics">
                    <div class="py-2"><p>{{templatesMessageData?.Language}}</p><p><span>Language</span></p></div>
                    <div class="py-2"><p>{{templatesMessageData?.Category}}</p><p><span>Category</span></p></div>         
                </div>
                
              
                    <div class="d-flex py-1">
                    <p>Healthcare</p>
                  </div>
                  <p><span>Industry</span></p>
            </div>


  
</div>
<div *ngIf="showGalleryDetail" class="campaign_detail">
    <div class="modal-header filtercampaignheader">
        <div class="modal-header-left">
        </div>
        <div class="modal-header-right">
            <p class="close-box" (click)="toggleGalleryData(null)"><img src="../../../../assets/img/teambox/icon-close.svg"></p>
        </div>
    </div>

    <div class="campaigns_section_item">
        <div class="campaigns_section_item_header">
            <label [style.background]="statusColors[templatesMessageData?.status]">{{templatesMessageData?.status}}</label>
        
        </div>

        <p class="title" >{{templatesMessageData?.Header}}</p>
        <!-- <p><img class="icon" src="../../../../assets/img/teambox/whatsapp-icon-l.svg" />{{templatesMessageData?.Channel}}</p> -->
        <div class="d-flex w-100 pb-4 category_section">
            <div>
                <p>Category</p>
                <span>{{templatesMessageData?.Category}}</span>
            </div>
            <div>
                <p>Language</p>
                <span>{{templatesMessageData?.Language}}</span>
            </div>
          
        </div>
        <p id="message_head"> Message </p>
        <div class="message_section">
            <div *ngIf="templatesMessageData.media_type == 'image'" class="message_type" [ngStyle]="{'background-image': 'url(' + templatesMessageData?.Links + ')'}"></div>
            <div *ngIf="templatesMessageData.media_type == 'video'" class="message_type">
                <video autoplay="false" muted loop id="video-background">
                    <source [src]="templatesMessageData?.Links" type="video/mp4">
                    Your browser does not support HTML5 video.
                  </video>
            </div>
            <div *ngIf="templatesMessageData?.media_type == 'document'" class="message_type">
                <iframe [src]="templatesMessageData?.Links" width="100%" height="150px"></iframe>

            </div>
            <div class="message_data">
                {{templatesMessageData?.BodyText}}
            </div>
            <div class="contact-us">
                Contact Us
            </div>
        </div>
     </div>
    <div class="action_section">
        <button type="button" class="btn" (click)=" copyTemplatesData()"><img src="../../../../assets/img/teambox/copy.svg"></button>
    </div>
</div>

</div>

<div class="modal fade" tabindex="-1" id="deleteModal"  data-bs-backdrop="static" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content delete-modal">
            <div class="modal-body alertmessage">
                <p class="label pb-2">Do you really want to delete this Template ?</p>
                <div class="delete_group_button d-flex justify-content-center">
                    <button type="button" class="cancel-btn" aria-label="Close"
                        data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="delete-btn" aria-label="Close" (click)="deleteTemplate()">Yes, Delete</button>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" tabindex="-1" id="filterTemplateModal" data-bs-backdrop="static" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content filterTemplate-modal">
            <div class="modal-header align-items-center ">
                <h5 class="modal-title">Filter</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <img src="../../../../assets/img/teambox/icon-close.svg">
                </button>
            </div>
            <div class="modal-body px-5 pt-0">
                <div class="container d-flex flex-row">

                
                <div class="d-flex flex-column filter-cateegory" >
                    <div class="d-flex justify-content-around" *ngFor="let f of filterCategory let i = index" 
                    [ngClass]="{'selected-category': i === selectedCategory}" (click)="setSelectedCategory(i)">
                      <span>{{f}}</span> 
                      <span><img class="" src="../../../../assets/img/profile/next1.svg"/>
                    </span>
                    </div>
                </div>
                <div class="px-5 flex-grow-1 filter-list">
                    <label *ngIf="selectedCategory == 0" class="pb-2">Filter by {{filterCategory[selectedCategory]}}</label>
                    <label *ngIf="selectedCategory == 1" class="pb-2">Filter by {{filterCategory[selectedCategory]}}</label>
                    <label *ngIf="selectedCategory == 2" class="pb-2">Filter by {{filterCategory[selectedCategory]}}</label>
                    <label *ngIf="selectedCategory == 3" class="pb-2">Filter by {{filterCategory[selectedCategory]}}</label><br>
                  
                    <div *ngIf="selectedCategory == 0">
                      <div *ngFor="let Topic of filterListTopic; let i = index" class="py-2 user-dropdown">
                        <input type="checkbox" [(ngModel)]="Topic.checked" class="user-checkbox" value={{Topic.value}} (click)="updateFilter($event,Topic)" >
                        <img class="user-img ml-2">
                        <span class="ml-2">{{Topic.label}}</span>
                      </div>
                    </div>
                    <div *ngIf="selectedCategory == 1">
                      <div *ngFor="let Industry of filterListIndustry; let i = index" class="py-2 user-dropdown">
                        <input type="checkbox" [(ngModel)]="Industry.checked" class="user-checkbox" value={{Industry.value}} (click)="updateFilter($event,Industry)">
                        <img class="user-img ml-2">
                        <span class="ml-2">{{Industry.label}}</span>
                      </div>
                    </div>
                    <div *ngIf="selectedCategory == 2">
                      <div *ngFor="let Category of filterListCategory; let i = index" class="py-2 user-dropdown">
                        <input type="checkbox" class="user-checkbox"  [(ngModel)]="Category.checked" value="{{Category.value}}" (click)="updateFilter($event,Category)" >
                        <img class="user-img ml-2">
                        <span class="ml-2">{{Category.label}}</span>
                      </div>
                    </div>
                    <div *ngIf="selectedCategory == 3">
                      <div *ngFor="let Language of filterListLanguage; let i = index" class="py-2 user-dropdown">
                        <input type="checkbox" class="user-checkbox" [(ngModel)]="Language.checked" value="{{Language.value}}" (click)="updateFilter($event,Language)">
                        <img class="user-img ml-2">
                        <span class="ml-2">{{Language.label}}</span>
                      </div>
                    </div>
                  </div>
                        
                </div>
              </div>
            <div class="modal-footer">
                <button type="button" class="account-btn" (click)="applyTemplateFilter()">Apply</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" tabindex="-1" id="newTemplateMessage" data-bs-backdrop="static" role="dialog">
    <div class="newTemplateMessage modal-dialog" role="document">
        <div class="modal-content welcomGreeting">
            <div class="d-flex justify-content-between align-items-center modal-header">
                <h5 class="pl-2 modal-title">New Template Message</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <img src="../../../../assets/img/teambox/icon-close.svg">
                </button>
            </div>
            <form [formGroup]="newTemplateForm">
           <div class="modal-container">
            <div class="modal-body">
                <div class="main-container-for-body">
                    <div class="d-flex justify-content-between align-items-center sel-type-btns">
                        <input type="radio" id="sel-text" name="sel-type" (change)="showMessageType('text')" checked><label [ngClass]="{'radio-label': selectedType === 'text'}" class="m-0" for="sel-text">Text</label>
                        <input type="radio" id="sel-image" name="sel-type" (change)="showMessageType('image')"><label [ngClass]="{'radio-label': selectedType === 'image'}"  class="m-0" for="sel-image">Image</label>
                        <input type="radio" id="sel-video" name="sel-type" (change)="showMessageType('video')"><label [ngClass]="{'radio-label': selectedType === 'video'}"  class="m-0" for="sel-video">Video</label>
                        <input type="radio" id="sel-document" name="sel-type"(change)="showMessageType('document')"><label [ngClass]="{'radio-label': selectedType === 'document'}" class="m-0" for="sel-document">Document</label>
                    
                    </div>

                    <div class="sel-type-text-container">
                            <div *ngIf="selectedType === 'text'">
                            <div class="d-flex justify-content-between align-items-center pt-3 pb-2 msg-head">
                                <h6>Header <span>(Optional)</span></h6><div><span class="characters-count">{{ getCharacterCount(3) }}</span><span>/60 Characters</span></div>
                            </div>
                            <div class="sel-type-text">
                                <textarea name="text-editor" formControlName="value" maxlength="60"rows="6" placeholder="Enter" (input)="updateCharacterCount($event,3)"></textarea>
                            </div>
                        </div>

                    </div>
            

                

                <div *ngIf="selectedType === 'image'" class="my-4 sel-type-image">
                        <input type="file" accept="image/jpg, image/png" formControlName="link" name="image-select" [formControl]="formControl" (change)="previewImage($event)" id="sel-type-image">
                        <label class="type_label" for="sel-type-image"><img src="../../../../assets/img/teambox/add-white.svg" /></label>
                        <p class="m-0">Upload or enter link of image</p>
                </div>

                <div *ngIf="selectedType === 'video'" class="my-4 sel-type-video">
                    <input type="file" accept="video/mp4"  formControlName="link" name="video-upload" (change)="handleVideoUpload($event)" id="sel-type-video">
                    <label *ngIf="!videoSelected" class="type_label" for="sel-type-video"><img src="../../../../assets/img/teambox/add-white.svg" /></label>
                    <div class="video-player">
                    <video controls #videoPlayer>
                        Your browser does not support the video tag.
                    </video>
                    </div>
                    <div class="custom-play-button"></div>
                
                </div>
            
                <div *ngIf="selectedType === 'document'" class="my-4 sel-type-image">
                        <input type="file" accept=".doc, .docx, .pdf" formControlName="link" name="document-select" id="sel-type-document">
                        <label class="type_label" for="sel-type-document"><img src="../../../../assets/img/teambox/add-white.svg" /></label>
                        <p class="m-0">Upload or enter link of document</p>
                </div>


            <div >

                <div *ngIf="selectedType !== 'text'" class="flex-column sel-type-link">
                    <label for="link" id="link" >Link</label>
                    <input type="url" id="link" formControlName="link"  placeholder="Enter">
                </div>


                <div class="d-flex justify-content-between align-items-center pt-3 pb-2 msg-head">
                    <h6>Body Text</h6> <div><span class="characters-count">{{ getCharacterCount(4) }}</span><span>/1024 Characters</span></div>
                </div>
                <div class="sel-type-text">
                    <textarea name="text-editor" formControlName="value" maxlength="1024"rows="8" placeholder="Enter" (input)="updateCharacterCount($event,4)"></textarea>
                </div>

                <div class="d-flex justify-content-between align-items-center pt-3 pb-2 msg-head">
                    <h6>Footer Text<span>(Optional)</span></h6><div> <span class="characters-count">{{ getCharacterCount(5) }}</span><span>/60 Characters</span></div>
                </div>
                <div class="sel-type-text">
                    <textarea name="text-editor" formControlName="value" maxlength="60"rows="4" placeholder="Enter" (input)="updateCharacterCount($event,5)"></textarea>
                </div>
            </div>
            </div>    
            
            <div class="d-flex pt-3 pb-2 flex-column add-buttons">
                <div class="px-4 pt-1 msg-head">
                    <h6>Buttons<span>(Optional)</span></h6>
                    <span class="pb-1">Add buttons to let customers respond to your message or<br /> take action</span>
                    <br />
                    <select class="mt-1 input-form">
                        <option  [disabled]="true" [selected]="true" [hidden]="true">Select a button type</option>
                        <option>Quick Reply</option>
                        <option>Call to Action</option>
                    </select>
                </div>

                <!-- <div class="quick-reply-btns">
                   <span>You can add upto 3 quick replies buttons</span>

                   <div *ngFor="let quickReply of quickReplyButtons;let idx=index">
                    <div class="d-flex justify-content-between align-items-center msg-head">
                        <h6>Quick Reply {{ idx + 1 }}</h6><div><span class="characters-count">{{ getCharacterCount(idx) }}</span><span>/25 Characters</span></div>
                    </div>
                    <div class="flex-column sel-type-link">
                        <input type="text" id="quickreply" [formControlName]="'quickreply' + (idx + 1)" maxlength="25" placeholder="Enter" (input)="updateCharacterCount($event, idx)">

                    </div>
                    <div class="d-flex justify-content-between incoming-card">
                        <div>
                            <a class="add-btn" (click)="addQuickReplyButtons()" *ngIf="idx == quickReplyButtons?.length -1">+ Add</a>
                        </div>
                        <a class="remove-btn" (click)="removeQuickReplyButtons(idx)" *ngIf="quickReplyButtons?.length>1">- Remove</a>
                    </div>
                   </div>
                    
                </div> -->

                <div class="call-to-action-btns">
                    <span>You can add upto 2 call to action buttons</span>
                    
                  <div class="container-call-to-btns">
                    <div class="d-flex justify-content-between">
                      <div class="pt-3 pb-2 msg-head">
                            <h6 class="pt-1 pb-3">Type of Action</h6>
                            <select class="input-form">
                                <option [selected]="true">Call Phone</option>
                                <option [disabled]="true" >Visit Website</option>
                            </select>
                        </div>
                    <div class="flex-grow-1">
                        <div class="d-flex justify-content-between align-items-center pt-3 pb-2 msg-head">
                            <h6>Button Name</h6> <div><span class="characters-count">{{ getCharacterCount(6) }}</span><span>/25 Characters</span></div>
                          </div>
                          <div class="sel-type-link">
                            <input type="text" id="call-phone" [formControlName]="'btn-name'" maxlength="25" placeholder="Enter" (input)="updateCharacterCount($event, 6)">
                        </div>                         
                    </div>
                  </div>
                  <div class="d-flex justify-content-between">
                    <div class="pt-3 pb-2 msg-head">
                    <h6 class="pt-1 pb-3">Country</h6>
                    <select class="input-form">
                        <option *ngFor="let countryCode of countryCodes" [value]="countryCode">
                          {{ countryCode }}
                        </option>
                      </select>
                    </div>
                    <div class="flex-grow-1">
                      <div class="d-flex justify-content-between align-items-center pt-3 pb-2 msg-head">
                        <h6>Phone No.</h6> <div><span class="characters-count">{{ getCharacterCount(7) }}</span><span>/20 Characters</span></div>
                      </div>
                      <div class="sel-type-link">
                        <input type="text" id="call-phone" [formControlName]="'phonenumber'" maxlength="20" placeholder="Enter" (input)="updateCharacterCount($event, 7)">
                   </div>  
                   </div>
                  </div>
                  </div>
                </div>
            
            </div>      
        </div>
        <div class=" col-5 justify-content-center preview-part">
       
            <div class="message_section">
                <h6>Preview</h6>
                <div  *ngIf="selectedType !== 'text'" class="message_type" [ngStyle]="{'background-image': 'url(' + selectedPreview + ')'}"></div>
                <!-- <div class="message_type">
                    <video autoplay muted loop id="video-background">
                        <source [src]="templatesMessageData?.Links" type="video/mp4">
                        Your browser does not support HTML5 video.
                      </video>
                </div> -->
                <div *ngIf="templatesMessageData?.media_type == 'document'" class="message_type">
                    <iframe [src]="templatesMessageData?.Links" width="100%" height="150px"></iframe>

                </div>
                <!-- <div class="message_type" [ngStyle]="{'background-image': 'url(' + templatesMessageData?.Links + ')'}"></div> -->
                <div class="message_data">
                    Personalized, doctor-backed treatment plans <br>
                    We believe how you feel in Product and mind transforms how you show up in life. That’s why we’re building a future where nothing stands in the way of harnessing this power.
                    <br>Get the latest 25%
                    
                </div>
                <!-- <div class="contact-us">
                    Contact Us
                </div> -->
            </div>
        </div>

    </div>
            <div class="modal-footer">
                <button type="button" class="account-btn" (click)="saveNewTemplate()">Save</button>
            </div>
        </form>
        </div>
    </div>
</div>