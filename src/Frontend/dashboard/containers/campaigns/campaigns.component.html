<sb-layout-dashboard>
	<sb-dashboard-head title="Campaigns" [hideBreadcrumbs]="true"></sb-dashboard-head>

	<div class="campaigns_page">

		<div class="toaster" (click)="hideToaster()">
			<p *ngIf="errorMessage" class="error">{{errorMessage}}</p>
			<p *ngIf="successMessage" class="success">{{successMessage}}</p>
			<p *ngIf="warningMessage" class="warning">{{warningMessage}}</p>
		</div>

		<div class="campaigns_section">
	
			<div class="campaigns_page_left">
					<input (focus)="focusInFunction()" (focusout)="focusOutFunction()" (keyup)="getSearchInteraction($event)"  [ngClass]="searchFocused ? 'search-box active' : 'search-box'" type="text" placeholder="Search" aria-label="Search" aria-describedby="basic-addon2" />
			</div>
			<div class="campaigns_page_right">
				<div class="drop-down-btn">
					<div class="toggle-box" (click)="filterCampaign(filtercampaign)">
						<img src="assets/img/teambox/filter-icon.svg">
					    <span>Filter</span>
					</div>
				</div>
				<button class="new-message-btn" (click)="openAddNew(addNewCampaign)"><img class="icon" src="/assets/img/teambox/add.svg" /> New Message</button>		
					
			</div>
			
			
		</div>

		<div class="campaigns_section">
			<p class="campaigns_content_heading"><img src="assets/img/teambox/instraction@2x.png"> <span>Messaging limit:</span> 1000 messages/24 hours</p>
			<div *ngIf="allCampaigns.length>0" class="campaigns_section_items" (click)="toggleCampaign()">
				<div class="campaigns_section_item draft">
					<div class="campaigns_section_item_header">
						<label>Draft</label>
						<span>id: 003016</span>
					</div>
					<p class="title">Gift Card Black Friday</p>
					<p class="start_time">Start time <span>21 Dec 22, 1:15 Pm</span></p>
					<p><img class="icon" src="/assets/img/teambox/whatsapp-icon-l.svg" />WhatsApp Official</p>
					<div class="campaigns_section_item_statics">
						<div>
							<p>514</p>
							<p><span>Traget Audience</span></p>
						</div>
						<div>
							<p>Authentication </p>
							<p><span>Category</span></p>
						</div>
					</div>
				</div>
				<div class="campaigns_section_item running">
					<div class="campaigns_section_item_header">
						<label>running</label>
						<span>id: 003016</span>
					</div>
					<p class="title">Gift Card Black Friday</p>
					<p class="start_time">Start time <span>21 Dec 22, 1:15 Pm</span></p>
					<p><img class="icon" src="/assets/img/teambox/whatsapp-icon-l.svg" />WhatsApp Official</p>
					<div class="campaigns_section_item_statics">
						<div>
							<p>514</p>
							<p><span>Traget Audience</span></p>
						</div>
						<div>
							<p>Authentication </p>
							<p><span>Category</span></p>
						</div>
					</div>
				</div>
				
				<div class="campaigns_section_item scheduled">
					<div class="campaigns_section_item_header">
						<label>scheduled</label>
						<span>id: 003016</span>
					</div>
					<p class="title">Gift Card Black Friday</p>
					<p class="start_time">Start time <span>21 Dec 22, 1:15 Pm</span></p>
					<p><img class="icon" src="/assets/img/teambox/whatsapp-icon-l.svg" />WhatsApp Official</p>
					<div class="campaigns_section_item_statics">
						<div>
							<p>514</p>
							<p><span>Traget Audience</span></p>
						</div>
						<div>
							<p>Authentication </p>
							<p><span>Category</span></p>
						</div>
					</div>
				</div>

				<div class="campaigns_section_item completed">
				<div class="campaigns_section_item_header">
						<label>completed</label>
						<span>id: 003016</span>
					</div>
					<p class="title">Gift Card Black Friday</p>
					<p class="start_time">Start time <span>21 Dec 22, 1:15 Pm</span></p>
					<p><img class="icon" src="/assets/img/teambox/whatsapp-icon-l.svg" />WhatsApp Official</p>
					<div class="campaigns_section_item_statics">
						<div>
							<p>514</p>
							<p><span>Traget Audience</span></p>
						</div>
						<div>
							<p>Authentication </p>
							<p><span>Category</span></p>
						</div>
					</div>
				</div>
				
				<div class="campaigns_section_item completed">
					<div class="campaigns_section_item_header">
						<label>completed</label>
						<span>id: 003016</span>
					</div>
					<p class="title">Gift Card Black Friday</p>
					<p class="start_time">Start time <span>21 Dec 22, 1:15 Pm</span></p>
					<p><img class="icon" src="/assets/img/teambox/whatsapp-icon-l.svg" />WhatsApp Official</p>
					<div class="campaigns_section_item_statics">
						<div>
							<p>514</p>
							<p><span>Traget Audience</span></p>
						</div>
						<div>
							<p>Authentication </p>
							<p><span>Category</span></p>
						</div>
					</div>
				</div>
				
				<div class="campaigns_section_item scheduled">
					<div class="campaigns_section_item_header">
						<label>scheduled</label>
						<span>id: 003016</span>
					</div>
					<p class="title">Gift Card Black Friday</p>
					<p class="start_time">Start time <span>21 Dec 22, 1:15 Pm</span></p>
					<p><img class="icon" src="/assets/img/teambox/whatsapp-icon-l.svg" />WhatsApp Official</p>
					<div class="campaigns_section_item_statics">
						<div>
							<p>514</p>
							<p><span>Traget Audience</span></p>
						</div>
						<div>
							<p>Authentication </p>
							<p><span>Category</span></p>
						</div>
					</div>	
				</div>
				
				<div class="campaigns_section_item running">
					<div class="campaigns_section_item_header">
						<label>running</label>
						<span>id: 003016</span>
					</div>
					<p class="title">Gift Card Black Friday</p>
					<p class="start_time">Start time <span>21 Dec 22, 1:15 Pm</span></p>
					<p><img class="icon" src="/assets/img/teambox/whatsapp-icon-l.svg" />WhatsApp Official</p>
					<div class="campaigns_section_item_statics">
						<div>
							<p>514</p>
							<p><span>Traget Audience</span></p>
						</div>
						<div>
							<p>Authentication </p>
							<p><span>Category</span></p>
						</div>
					</div>
				</div>
				
				<div class="campaigns_section_item draft">
					<div class="campaigns_section_item_header">
						<label>Draft</label>
						<span>id: 003016</span>
					</div>
					<p class="title">Gift Card Black Friday</p>
					<p class="start_time">Start time <span>21 Dec 22, 1:15 Pm</span></p>
					<p><img class="icon" src="/assets/img/teambox/whatsapp-icon-l.svg" />WhatsApp Official</p>
					<div class="campaigns_section_item_statics">
						<div>
							<p>514</p>
							<p><span>Traget Audience</span></p>
						</div>
						<div>
							<p>Authentication </p>
							<p><span>Category</span></p>
						</div>
					</div>
				</div>
				
				<div class="campaigns_section_item scheduled">
					<div class="campaigns_section_item_header">
						<label>scheduled</label>
						<span>id: 003016</span>
					</div>
					<p class="title">Gift Card Black Friday</p>
					<p class="start_time">Start time <span>21 Dec 22, 1:15 Pm</span></p>
					<p><img class="icon" src="/assets/img/teambox/whatsapp-icon-l.svg" />WhatsApp Official</p>
					<div class="campaigns_section_item_statics">
						<div>
							<p>514</p>
							<p><span>Traget Audience</span></p>
						</div>
						<div>
							<p>Authentication </p>
							<p><span>Category</span></p>
						</div>
					</div>	
				</div>
				

			</div>
			<div *ngIf="showCampaignDetail" class="campaign_detail">
				<div class="modal-header filtercampaignheader">
					<div class="modal-header-left">
					</div>
					<div class="modal-header-right">
						<p  class="close-box" (click)="toggleCampaign()"><img src="assets/img/teambox/icon-close.svg"></p>
					</div>
				</div>

				<div class="campaigns_section_item draft">
					<div class="campaigns_section_item_header">
						<label>Draft</label>
						<span>id: 003016</span>
					</div>
					<p class="start_time">Created on <span>21 Dec 22, 1:15 Pm</span> Start time <span>21 Dec 22, 1:15 Pm</span></p>
					<p class="title"><img class="icon_sm" src="/assets/img/teambox/edit-icon.svg"> Gift Card Black Friday</p>
					<p><img class="icon" src="/assets/img/teambox/whatsapp-icon-l.svg" />WhatsApp Official</p>
					<!--If running start-->
					<p class="sub_title_sm blackcolor mb-1">Reports</p>
					<div class="running_section">
						<div class="running_section_row">
							<img class="icon" src="/assets/img/teambox/sent.svg" />
							<div>
								<p>337</p>
								<p><span>Sent</span></p>
							</div>
						</div>
						<div class="running_section_row">
							<img class="icon" src="/assets/img/teambox/failed-camp-1.svg" />
							<div>
								<p>64</p>
								<p><span>Failed</span></p>
							</div>
						</div>
					</div>

					<div class="running_section">
						<div class="running_section_row">
							<img class="icon" src="/assets/img/teambox/delivered.svg" />
							<div>
								<p>337</p>
								<p><span>Delivered</span></p>
							</div>
						</div>
						<div class="running_section_row">
							<img class="icon" src="/assets/img/teambox/seen.svg" />
							<div>
								<p>64</p>
								<p><span>Seen</span></p>
							</div>
						</div>
					</div>

					<div class="running_section">
						<div class="running_section_row">
							<div class="icon_outer">
								<img class="icon" src="/assets/img/teambox/quick-replies.svg" />
							</div>
							<div>
								<p>337</p>
								<p><span>Replied</span></p>
							</div>
						</div>
						<div class="running_section_row">
							
						</div>
					</div>


					<!--If running end-->
					
					<p class="sub_title_sm mb-1"><img class="icon_sm" src="/assets/img/teambox/edit-icon.svg"> Traget Audience</p>
					<p>604 <span>( Segment Audience)</span></p>
					<p class="sub_title_sm"><img class="icon_sm" src="/assets/img/teambox/edit-icon.svg"> Message</p>
					<p class="sub_title_sm blackcolor mb-1">Category</p>
					<p>Marketing</p>
					<div class="template">
						<div class="template_img">
							<img src="/assets/img/teambox/sample_img2.png">
						</div>
						<div class="template_text">
							<p class="name">[[Name]]</p>
							<p class="heading">Vitamins, Minerals & Supplements</p>
							<p class="description">Are you unable to get the right amount of vitamins [[Product]]essential nutrients through the food that you eat?</p>
							<p class="discount">[[OFF]] Instant Discount with HDFC Bank</p>
							<p class="name" >Hurry up!</p>
						</div>

					</div>
					<div class="template_btn">
						<button type="button" class="btn">YES</button>
						<button type="button" class="btn">NO</button>
						<button type="button" class="btn">EXPLORE</button>
			
					</div>
					
					<p class="sub_title_lg blackcolor dropdown" (click)="toggleshowAdvance()">Advance Options<img *ngIf="!showAdvance" class="icon" src="/assets/img/teambox/down-aarow.svg"><img *ngIf="showAdvance" class="icon" src="/assets/img/teambox/up-aarow.svg"></p>
					<div *ngIf="showAdvance">
					<p class="sub_title_sm blackcolor">Variable Values</p>
					<div class="btn_group"><input type="text" value="[[name]]" /> asasdasdada</div>
					<div class="btn_group"><input type="text" value="[[product]]" /> Product column</div>
					<div class="btn_group"><input type="text" value="[[off]]" /> 25%</div>
					<p class="sub_title_sm blackcolor mt-2 mb-2">Button Payload</p>
					<div class="btn_group"><input type="text" value="YES" /> 12123sdsad</div>
					<div class="btn_group"><input type="text" value="EXPLORE" /> sdasdsdsd</div>
				    </div>
					
					
				</div>
				<div class="action_section">
					<button type="button" class="btn"><img src="/assets/img/teambox/copy.svg"></button>
					<button type="button" class="btn" (click)="deleteCampaign(openalertmessage)"><img src="/assets/img/teambox/delete.png"></button>
				</div>
			</div>
			<div *ngIf="allCampaigns.length<1" class="campaigns_section_items no-campaign">
				<img src="assets/img/teambox/no-campaign@2x.png">
				<p>No Campaign</p>
				<p><span>Lorium ipsum dolor sit amet</span></p>
			</div>
		</div>

	</div>

	<ng-template #filtercampaign let-c="close" let-d="dismiss">
		<div class="modal-header filtercampaignheader">
			<div class="modal-header-left">
				<h4 class="modal-title" id="modal-basic-title">Filter</h4>
			</div>
			<div class="modal-header-right">
				<p class="close-box" aria-label="Close" (click)="d('Cross click')"><img src="assets/img/teambox/icon-close.svg"></p>
			</div>
			</div>
		<div class="modal-body filtercampaign">
			<p class="label">Campaign Type</p>
            <div class="input_group">
				  <label class="container">Running
					<input type="checkbox">
					<span class="checkmark"></span>
				  </label>
				  <label class="container">Scheduled
					<input type="checkbox">
					<span class="checkmark"></span>
				  </label>
				  <label class="container">Executed
					<input type="checkbox">
					<span class="checkmark"></span>
				  </label>
				  <label class="container">Draft
					<input type="checkbox">
					<span class="checkmark"></span>
				  </label>

				
			</div>
			<p class="label">By Channels</p>
			<div class="input_group">
				  <label class="container">WhatsApp Official
					<input type="checkbox">
					<span class="checkmark"></span>
				  </label>
				  <label class="container">WhatsApp Web
					<input type="checkbox">
					<span class="checkmark"></span>
				  </label>
			</div>
			<p class="label">By Categories</p>
			<div class="input_group">
				<label class="container">Marketing
					<input type="checkbox">
					<span class="checkmark"></span>
				  </label>
				  <label class="container">Utility
					<input type="checkbox">
					<span class="checkmark"></span>
				  </label>
				  <label class="container">Authentication
					<input type="checkbox">
					<span class="checkmark"></span>
				  </label>
			</div>
			<p class="label">By Date range</p>
			<div class="input_value_group">
				<p><input class="input_value" type="date" placeholder="Start Date"></p>
				<p><input class="input_value" type="date" placeholder="End Date"></p>
			</div>
			<div class="input_group_btn">
			<button type="button" class="cancel-btn" aria-label="Close" (click)="d('Cross click')">Cancel</button>
			<button type="button" class="submit-btn" aria-label="Close" (click)="d('Cross click')">Apply</button>
			</div>
	
			
			
		</div>
		
	</ng-template>
	
	<ng-template #addNewCampaign let-c="close" let-d="dismiss">
		<div class="modal-header">
			<div class="modal-header-left">
				<h4 class="modal-title" id="modal-basic-title">New Campaign {{activeStep}}</h4>
			</div>
			<div class="modal-header-right">
				<p class="close-box" aria-label="Close" (click)="d('Cross click')"><img src="assets/img/teambox/icon-close.svg"></p>
			</div>
			</div>
		<div class="modal-body">
			
			<div class="addeidtcampaign_menu">
				<div class="addeidtcampaign_menu_item">
					<img *ngIf="activeStep > 1" class="icon" src="assets/img/campaign/back.svg" (click)="prevStep()">
				</div>
				<div [ngClass]="activeStep > 0 ? 'addeidtcampaign_menu_item active' : 'addeidtcampaign_menu_item'" (click)="setStep(1)" ><span>1</span><p>Add Name & Channel</p></div>
				<div class="addeidtcampaign_menu_item_dotted"><p></p></div>
				<div [ngClass]="activeStep > 1 ? 'addeidtcampaign_menu_item active' : 'addeidtcampaign_menu_item'"  (click)="setStep(2)"><span>2</span><p>Add Audience</p></div>
				<div class="addeidtcampaign_menu_item_dotted"><p></p></div>
				<div [ngClass]="activeStep > 2 ? 'addeidtcampaign_menu_item active' : 'addeidtcampaign_menu_item'"  (click)="setStep(3)"><span>3</span><p>Add Message</p></div>
				<div class="addeidtcampaign_menu_item_dotted"><p></p></div>
				<div [ngClass]="activeStep > 3.2 ? 'addeidtcampaign_menu_item active' : 'addeidtcampaign_menu_item'"  (click)="setStep(4)"><span>4</span><p>Preview & Schedule</p></div>
				<div class="addeidtcampaign_menu_item"></div>
			</div>

			<div [ngClass]="activeStep ==1 ? 'addeidtcampaign_step active' : 'addeidtcampaign_step'">
				<div class="innerbox bg_pink">
				<form [formGroup]="campaignDetail">
					<div class="formrow">
						<label for="name" class="required">Campaign Name</label>
						<input class="form-control" type="text" placeholder="Enter title in max 20 character" name="Name"
								formControlName="Name" id="name" />
					</div>

					<div class="formrow">
						<label for="Channel" class="required">Channel</label>
						<input class="form-control select_box" type="text" placeholder="Select channel" name="Channel"
								formControlName="Channel" id="Channel" (click)="toggleChannelOption()" />
						<div *ngIf="ShowChannelOption" class="popup-dialog">
							<p class="label">Channel</p>
							<p (click)="selectChannel('ch1')"><span>Channel One</span></p>
							<p (click)="selectChannel('ch2')"><span>Channel Two</span></p>
							<p (click)="selectChannel('ch3')"><span>Channel Three</span></p>
							<p (click)="selectChannel('ch4')"><span>Channel Four</span></p>
							<p (click)="selectChannel('ch5')"><span>Channel Five</span></p>
						</div>
					</div>
				</form>
				</div>
			</div>
			<div [ngClass]="activeStep ==2 ? 'addeidtcampaign_step active' : 'addeidtcampaign_step'">
				<p><span>Select a method to proceed next to add an audience</span></p>
				<div class="outerbox" >
						<div [ngClass]="step2Option =='AddSegmentAudience' ? 'innerbox active' : 'innerbox'"  (click)="selectStep2Option('AddSegmentAudience',addsegmentaudience,step2Option)">
						
							<img class="icon ml" src="assets/img/campaign/add-segment.svg">
							<p>Add Segment Audience</p>
							<p><span>Select from the Saved Lists or create a new List by filtering existing contacts</span></p>
							<p *ngIf="!newListName" class="sm_icon"><span><img src="assets/img/campaign/arrow-right.svg"></span></p> 	
							<div *ngIf="newListName" class="formrow">
								<p class="form-control btn rt_close">{{newListName}}</p>
							</div>
						</div>

						<div [ngClass]="step2Option =='ImportContacts' ? 'innerbox active' : 'innerbox'"  (click)="selectStep2Option('ImportContacts',ImportContacts,step2Option)">
							
							<img class="icon ml" src="assets/img/campaign/import-contacts.svg">
							<p>Import Contacts</p>
							<p><span>Add audience to your campaign by importing contacts from CSV file or Excel sheet</span></p>
							<p *ngIf="!importedContacts" class="sm_icon"><span><img src="assets/img/campaign/arrow-right.svg"></span></p> 	
							<div *ngIf="importedContacts" class="formrow">
								<p class="form-control btn rt_close">{{importedContacts}}</p>
							</div>
						</div>
				</div>
			</div>

			<div [ngClass]="activeStep >2 && activeStep <4 ? 'addeidtcampaign_step active' : 'addeidtcampaign_step'">
				<div *ngIf="activeStep==3">
					<div class="section_header">
						<div class="inner">
						<p class="heading">Add Template</p>
						<p><span>Select a message to create campaign</span></p>
						</div>
						<div class="inner right">
							<input placeholder="Search" type="text" class="search-box" >
						</div>
					</div>
					<div class="section_filter">
						<label class="container">
							<input type="checkbox" name="term_cond">
							<span class="checkmark"></span>
							<p><span>Marketing</span></p>
						</label>
						<label class="container">
							<input type="checkbox" name="term_cond">
							<span class="checkmark"></span>
							<p><span>Utility</span></p>
						</label>
						<label class="container">
							<input type="checkbox" name="term_cond">
							<span class="checkmark"></span>
							<p><span>Authentication</span></p>
						</label>

					</div>
					<div class="template_list">
						<div class="template_box" *ngFor='let in of counter(5) ;let i = index'>
							<label class="container">
								<input type="radio" name="selectedTemplate">
								<span class="checkmark radio"></span>
								<p>Healthkart-Offers</p>
								<p><span>21-12-2022</span></p>
							</label>
							
							<div class="inner_box">
								<img class="template_img" src="/assets/img/campaign/template-img.png">
								<div class="template_text">
									<p>Vitamins, Minerals & Supplements</p>
									<p><span>Are you unable to get the right amount of vitamins tablets and essential nutrients through the food that you eat?</span></p>
									<p ><span class="line_through">Get 10% Instant Discount with HDFC Bank</span>></p>
									<p><span>Get 25% Instant Discount with HDFC Bank</span></p>
								</div>
							</div>
							<div class="template_btn">
								<button type="button" class="btn">YES</button>
								<button type="button" class="btn">NO</button>
								<button type="button" class="btn">EXPLORE</button>
					
							</div>
							
						</div>

					</div>
				</div>
				<div *ngIf="activeStep==3.1">
					<div class="template_details_section">
						<div class="template_details_section_left">
							<p>Healthkart-Offers</p>
							<div class="template">
								<div class="template_img">
									<img src="/assets/img/teambox/sample_img2.png">
								</div>
								<div class="template_text">
									<p class="name">[[Name]]</p>
									<p class="heading">Vitamins, Minerals & Supplements</p>
									<p class="description">Are you unable to get the right amount of vitamins [[Product]]essential nutrients through the food that you eat?</p>
									<p class="discount">[[OFF]] Instant Discount with HDFC Bank</p>
									<p class="name" >Hurry up!</p>
								</div>
		
							</div>
							<div class="template_btn">
								<button type="button" class="btn">YES</button>
								<button type="button" class="btn">NO</button>
								<button type="button" class="btn">EXPLORE</button>
					
							</div>
						</div>
						
						<div class="template_details_section_right">
							<p class="mt-2">Variable value<img class="icon sm" src="/assets/img/campaign/Info.svg"></p>
							<div class="form_row">
								<label>[[Name]]</label>
								<div>
									<p class="form-control">
										<input type="text" class="form-control inner"  placeholder="Input value or add attribute">
										<span class="map_attribute" (click)="openMapOption('map_name')">Map</span>
									</p>
									<div *ngIf="MapOptionFor =='map_name'" class="popup-dialog">
										<p class="label">Map the column</p>
										<p *ngFor="let map of mapNameOption ;let i = index" (click)="openMapOption('')"><span>{{map}}</span></p>
									</div>
							</div>
							</div>
							<div class="form_row">
								<label>[[Product]]</label>
								<p class="form-control">
									<input type="text" class="form-control inner"  placeholder="Input value or add attribute">
									<span class="map_attribute_img" (click)="openVariableOption(variableoption)"><img src="/assets/img/campaign/attribute.svg"></span>
								</p>
							</div>
							<div class="form_row">
								<label>[[25%]]</label>
								<p class="form-control">
									<input type="text" class="form-control inner"  placeholder="Input value or add attribute">
									<span class="map_attribute_img" (click)="openVariableOption(variableoption)"><img src="/assets/img/campaign/attribute.svg"></span>
								</p>
							</div>
							
							<p class="mt-2">Button Payload <span>(Optional)</span><img class="icon sm" src="/assets/img/campaign/Info.svg"></p>
							<div class="form_row">
								<label>Yes</label>
								<input type="text" class="form-control" value="J45A1005">
							</div>
							<div class="form_row">
								<label>No</label>
								<input type="text" class="form-control" value="" placeholder="Input payload value">
							</div>
							<div class="form_row">
								<label>Explore</label>
								<input type="text" class="form-control" value="" placeholder="Input payload value">
							</div>
						</div>
					</div>
				</div>

				<div *ngIf="activeStep==3.2">
						<div class="template_details_section_left">
							<p>Healthkart-Offers</p>
							<div class="template">
								<div class="template_img">
									<p class="close-box" (click)="editTemplateMedia()"><img src="/assets/img/campaign/edit.svg"></p>
									<img src="/assets/img/teambox/sample_img2.png">
								</div>
								<div class="template_text">
									<p class="name">Dear</p>
									<p class="heading">Congratulations!</p>
									<p class="description">You're Pre-Approved for a Loan on your HDFC Bank Credit Card Claim cash loan instantly!</p>
									<p class="description">No Paperwork <br>nstant Disbursal<br> Flat Rs. 999 Processing Fee</p>
									
								</div>
		
							</div>
							
						</div>
						
						<div *ngIf="showEditTemplateMedia" class="important_contact_modal">
							<div class="modal-header importantContact">
								<div class="modal-header-left">
									<h4 class="modal-title" id="modal-basic-title">Replace Media</h4>
								</div>
								<div class="modal-header-right">
									<p  class="close-box" aria-label="Close" (click)="editTemplateMedia()"><img src="assets/img/teambox/icon-close.svg"></p>
								</div>
								</div>
							
							<div class="modal-body">
								  <label class="container mb-2">
									<input type="radio" name="media_source">
									<span class="label">By Uploading file</span>
									<span class="checkmark radio"></span>
								  </label>

								<div class="important_contact">
									
									<div class="important_contact_left dragAreaClass"> 
									
										<img class="icon xl" src="assets/img/campaign/image-a@2x.png">
										<p>Drag & Drop files</p>
										<p><span>or</span></p>
										<label class="custom-file-upload">
											<input type="file"
												   #file
												   [multiple]="false"
												   (change)="onFileChange($event)"
												   style="display:none" />
											<img class="icon" src="/assets/img/teambox/upload.png"> Browse files
										</label>
									</div>
					
									<div class="important_contact_right mt-0">
										<div class="info_box mt-0">
											<p class="info"><img src="assets/img/campaign/info-icon.png">Instructions</p>
											<p><span>Upload a CSV file with the contacts and details that you would like to import. Ensure the CSV file fulfils the Following requirements: Only CSV files are accepted for import. File size must be 10 MB The file must contain at least.. the CSV file fulfils the Following requirements: Only CSV files are accepted for import. File size must be 10 MB</span></p>
										</div>
										
									</div>
									
								</div>
								<div class="important_contact_middle edit_template">
									
									<div class="left_part">
										<label class="container">
											<input type="radio" name="media_source">
											<span class="label">By URL</span>
											<span class="checkmark radio"></span>
										</label>
										<div class="formrow">
											<label for="name">URL</label>
											<input class="form-control" type="text" placeholder="Enter title in max 20 character" name="Name"
													formControlName="Name" id="name" />
										</div>
									 
									</div>
									<div class="right_part">
										  <label class="container">
											<input type="radio" name="media_source">
											<span class="label">Use custom media header</span>
											<span class="checkmark radio"></span>
										  </label>
										  <div class="formrow ">
											<label for="name">Input Value</label>
											<p class="form-control">
												<input type="text" class="form-control inner" placeholder="Input value or add attribute">
												<span class="map_attribute_img" (click)="openVariableOption(variableoption)"><img src="/assets/img/campaign/attribute.svg"></span>
											</p>
											
										</div>
										
									</div>
					
								</div>

								<div class="input_group_btn mb-4">
									<button type="button" class="cancel-btn"  (click)="editTemplateMedia()">Cancel</button>
									<button type="button" class="submit-btn"  (click)="editTemplateMedia()">Done</button>
								</div>
						
							</div>
							
						</div>
				</div>
				
			</div>

			<div [ngClass]="activeStep ==4 ? 'addeidtcampaign_step active' : 'addeidtcampaign_step'">
				<div class="campaign_preview">
					<div class="campaign_preview_left">
						<p class="label">Summery</p>
						<p class="heading">Gift Card Black Friday</p>
						<p><img class="icon" src="/assets/img/teambox/whatsapp-icon-l.svg" />WhatsApp Web</p>
						<p class="label mt-3">Traget Audience</p>
						<p class="value">604 <span>( Segment Audience)</span></p>
						<p class="label mt-3">Message</p>
						<p class=" mt-3">Category</p>
						<p class="value">Marketing</p>
						<div class="template mt-2">
							<div class="template_img">
								<img src="/assets/img/teambox/sample_img2.png">
							</div>
							<div class="template_text">
								<p class="name">[[Name]]</p>
								<p class="heading">Vitamins, Minerals & Supplements</p>
								<p class="description">Are you unable to get the right amount of vitamins [[Product]]essential nutrients through the food that you eat?</p>
								<p class="discount">[[OFF]] Instant Discount with HDFC Bank</p>
								<p class="name" >Hurry up!</p>
							</div>
	
						</div>
						<div class="template_btn">
							<button type="button" class="btn">YES</button>
							<button type="button" class="btn">NO</button>
							<button type="button" class="btn">EXPLORE</button>
						</div>
						<p class="sub_title_lg blackcolor dropdown mb-2" (click)="toggleshowAdvance()">Advance Options<img *ngIf="!showAdvance" class="icon" src="/assets/img/teambox/down-aarow.svg"><img *ngIf="showAdvance" class="icon" src="/assets/img/teambox/up-aarow.svg"></p>
							<div *ngIf="showAdvance">
							<p class="sub_title_sm blackcolor">Variable Values</p>
							<div class="btn_group"><input type="text" value="[[name]]" /> asasdasdada</div>
							<div class="btn_group"><input type="text" value="[[product]]" /> Product column</div>
							<div class="btn_group"><input type="text" value="[[off]]" /> 25%</div>
							<p class="sub_title_sm blackcolor mt-2 mb-2">Button Payload</p>
							<div class="btn_group"><input type="text" value="YES" /> 12123sdsad</div>
							<div class="btn_group"><input type="text" value="EXPLORE" /> sdasdsdsd</div>
							</div>

					</div>
					<div class="campaign_preview_right">
						<p>Schedule</p>
						<div class="container_row">
						<label class="container" (click)="selectScheduled(0)">
							<input type="radio" name="schedule" value="0">
							<span class="checkmark radio"></span>
							<p><span>Start Now</span></p>
						</label>
						<label class="container" (click)="selectScheduled(1)">
							<input type="radio" name="schedule" value="1">
							<span class="checkmark radio"></span>
							<p><span>Schedule Later</span></p>
						</label>
						</div>
						<div class="middel_section_outer">
							<div *ngIf="scheduled==1" class="middel_section">
								<div class="formrow">
									<p>Time Zone</p>
									<p (click)="toggleTimeZone()" class="form-control select_box btn">{{selecteTimeZone}}</p>
									<div *ngIf="showTimeZoneOption" class="popup-dialog">
										<p class="label">Zone</p>
										<p *ngFor='let timezone of timeZonesList ;let i = index' (click)="selectTimeZone(timezone)"><span>{{timezone}}</span></p>
									</div>
								</div>
								
								<div class="formrow">
									<p>Schedule Date</p>
									<p (click)="toggleScheduleDate()" class="form-control select_box btn">{{selecteScheduleDate}}</p>
									<div *ngIf="showScheduleDateOption" class="popup-dialog">
										<p class="label">Date</p>
										<p *ngFor='let ScheduleDate of ScheduleDateList ;let i = index' (click)="selectScheduleDate(ScheduleDate)"><span>{{ScheduleDate}}</span></p>
									</div>
								</div>

								<div class="formrow">
									<p>Schedule Time</p>
									<p (click)="toggleScheduleTime()" class="form-control select_box btn">{{selecteScheduleTime}}</p>
									<div *ngIf="showScheduleTimeOption" class="popup-dialog">
										<p class="label">Time</p>
										<p *ngFor='let ScheduleTime of ScheduleTimeList ;let i = index' (click)="selectScheduleTime(ScheduleTime)"><span>{{ScheduleTime}}</span></p>
									</div>
								</div>
							</div>
						</div>
						<div class="bottom_section">
							<p class="form-control" (click)="TestCampaign(TestCampaignModal)">Test Campaign</p>
						</div>
						<div class="bottom_section">
						<p class="close-box" ><img class="setting_icon" src="/assets/img/campaign/setting-g.svg"></p>
						<p class="text-box-readonly">To configure no. from settings</p>
						</div>
					</div>
				
				</div>
			</div>

			<div class="input_group_btn">
				<button type="button" class="submit-btn" (click)="nextStep()">Next</button>
			</div>

			
			
		</div>
		
	</ng-template>
	

	<div *ngIf="importantContact" class="important_contact_modal">
		<div class="modal-header importantContact">
			<div class="modal-header-left">
				<h4 class="modal-title" id="modal-basic-title">Important Contact</h4>
			</div>
			<div class="modal-header-right">
				<p  class="close-box" aria-label="Close" (click)="closeImportantContact()"><img src="assets/img/teambox/icon-close.svg"></p>
			</div>
			</div>
		<div class="modal-body">
			<div class="important_contact">
				<div class="important_contact_left dragAreaClass"> 
				
					<img class="icon xl" src="assets/img/campaign/image-a@2x.png">
					<p>Drag & Drop files</p>
					<p><span>or</span></p>
					<label class="custom-file-upload">
						<input type="file"
							   #file
							   [multiple]="false"
							   (change)="onFileChange($event)"
							   style="display:none" />
						<img class="icon" src="/assets/img/teambox/upload.png"> Browse files
					</label>
				</div>

				<div class="important_contact_right">
					<button type="button" class="paper-download"><img src="assets/img/campaign/paper-download.png">Download sample file</button>
					<div class="info_box">
						<p class="info"><img src="assets/img/campaign/info-icon.png">Instructions</p>
						<p><span>As the message template that you will select in the next step may include variables, so please include the variable values in the CSV file against each contact to personalize your message</span></p>
					</div>
					
				</div>
				
			</div>
			<div class="important_contact_middle">
				<div class="left_part">
				 <p>Remove Duplicate</p>
                 <div class="radio_group">
					   <label class="container">
						<input type="radio" name="rm_duplicate">
						<span class="label">Yes</span>
						<span class="checkmark radio"></span>
					  </label>
					  <label class="container">
						<input type="radio" name="rm_duplicate">
						<span class="label">No</span>
						<span class="checkmark radio"></span>
					  </label>

					 
				 </div>
				</div>
				<div class="right_part">
					<p>Prefix</p>
					<div class="radio_group_col">
						<div class="radio_group_col_inner">
						  <label class="container">
							<input type="radio" name="prefix">
							<span class="label">Add</span>
							<span class="checkmark radio"></span>
						  </label>
						  <input type="text" class="text-input" placeholder="Enter">
						</div>

						<div class="radio_group_col_inner">
							<label class="container">
							  <input type="radio" name="prefix">
							  <span class="label">Remove</span>
							  <span class="checkmark radio"></span>
							</label>
							<input type="text" class="text-input" placeholder="Enter">
						  </div>
					</div>
				</div>

			</div>
			<div class="important_contact">
			<div class="input_group_btn">
				<label class="container">
					<input type="checkbox" name="term_cond">
					<span class="checkmark"></span>
					<p><span>By checking this box I declare that the contacts uploaded have been opted-in and given consent accordingly</span></p>
					
				  </label>

				<button type="button" class="submit-btn" aria-label="Close" (click)="mapImportantContact(mpcampaign)">Map</button>
			</div>
			</div>
	
		</div>
		
	</div>
	
	
	<ng-template #TestCampaignModal let-c="close" let-d="dismiss">
		
		<div class="modal-body testcampaignmodal">
		
			<img src="/assets/img/campaign/sch-o.svg">
			<p>You are about to schedule</p>
			<p><span>Please confirm the Bodybuilding Supplements campaign will take place on 25 December 2022 at 3:00 pm.</span></p>
			<button type="button" class="submit-btn mt-3" aria-label="Close" (click)="d('Cross click')">Confirm</button>
			
		</div>
		
	</ng-template>

	<ng-template #variableoption let-c="close" let-d="dismiss">
		<div class="modal-header">
			<div class="modal-header-left">
				<h4 class="modal-title" id="modal-basic-title">Attributes</h4>
			</div>
			<div class="modal-header-right">
				<p  class="close-box" aria-label="Close" (click)="d('Cross click')"><img src="assets/img/teambox/icon-close.svg"></p>
			</div>
		</div>
		
		
		<div class="modal-body variableoption">
			<div class="content">
				<input placeholder="Search" type="text" class="search-box" >
				<p *ngFor='let attribute of attributesoption ;let i = index' class="form-control" (click)="selectAttribute(d)">
					{{attribute}}
			    </p>

				<div class="content_inner">
					<p><span>Fallback</span></p>
					<input placeholder="Enter value" type="text" class="form-control" >
				</div>
									
			</div>
			
			<div class="input_group_btn">
				<button type="button" class="cancel-btn" aria-label="Close" (click)="d('Cross click')">Cancel</button>
				<button type="button" class="submit-btn" aria-label="Close" (click)="selectAttribute(d)">Done</button>
			</div>
	
			
			
		</div>
		
	</ng-template>

	<ng-template #mpcampaign let-c="close" let-d="dismiss">
		<div class="modal-header mpcampaign">
			<div class="modal-header-left">
				<h4 class="modal-title" id="modal-basic-title">Map</h4>
			</div>
			<div class="modal-header-right">
				<img  class="icon" src="assets/img/campaign/back.svg" (click)="openImportantContact(d)">
			</div>
			</div>
		<div class="modal-body mpcampaign">
			<p><span>To map please select contacts column from your CSV/Excel file.</span></p>
			
			<div class="formrow">
				<input type="text" class="form-control select_box" placeholder="Type or select column">
			</div>
			<div class="input_group_btn">
			<button type="button" class="submit-btn" aria-label="Close" (click)="ImportMapping(d)">Import</button>
			</div>
	
			
			
		</div>
		
	</ng-template>

	<ng-template #addsegmentaudience let-c="close" let-d="dismiss">
		<div class="modal-header">
			<div class="modal-header-left">
				<img class="icon" src="assets/img/campaign/back.svg" (click)="d('Cross click')"> <h4 class="modal-title" id="modal-basic-title">Saved Lists</h4>
			</div>
			<div class="modal-header-right">
				<p class="text-box-readonly mr-2">Manage Saved Lists from settings</p>
				<p  class="close-box" aria-label="Close" (click)="closeImportantContact()"><img class="setting_icon" src="assets/img/campaign/setting-g.svg"></p>
			</div>
			
			</div>
		<div class="modal-body addsegmentaudience">
			<div class="addsegmentaudience_header">
				<div class="addsegmentaudience_header_left">
					<input placeholder="Search" type="text" class="search-box" >
				</div>
				<div class="addsegmentaudience_header_right">
					<button class="new-message-btn" (click)="openAddNewItem(addNewItem)"><img class="icon" src="/assets/img/teambox/add.svg" /> Create List</button>		
				</div>
			</div>

			<div class="audience_list">
				
				<div *ngFor='let in of counter(15) ;let i = index' class="campaigns_section_item">
					<div class="campaigns_section_item_header">
						<label class="container">
							<input type="checkbox" name="term_cond">
							<span class="checkmark"></span>
						</label>
					</div>
					<p class="title">New Audience by Ipsum {{i}}</p>
					<p class="start_time">Last modified on <span>21 Dec 22, 1:15 Pm</span></p>
					<div class="applied_filter">
				     <p (click)="selectItem(i)">
						7 Filter Applied<img src="/assets/img/teambox/dropdown.svg"> 
					</p>
					<div [ngClass]="slectedItem ==i ? 'applied_filter_popup active' : 'applied_filter_popup'">
						<div class="item"><p>Phone No. Starts with +44</p></div>
						<div class="item"><span>And</span><p>Phone No. Does not Contain +91</p></div>
						<div class="item"><span>And</span><p>Filter Last Message Received Between 15 Jan 2022 to 20 Jan 2022</p></div>
						<div class="item"><span>OR</span><p>Filter Tag is Not Unpaid</p></div>
						
					</div>
				    </div>
					<div class="campaigns_section_item_statics">
						<div>
							<p>514</p>
							<p><span>No. of Audience</span></p>
						</div>
						<div>
							<p class="default_avtar"><img  src="/assets/img/campaign/default-avtar.png">Raman Bhasker</p>
							<p><span>Created By</span></p>
						</div>
					</div>
				</div>

				
			</div>

			<div class="important_contact">
				<div class="input_group_btn">
				  <div class="custom_col">
					<label class="container">
					<input type="checkbox" name="term_cond">
					<span class="checkmark"></span>
					<p><span>Message Opt in</span></p>
				  </label>
				  <p class="sml-text"><span>Send only to contacts with message Opt-in enabled</span></p>
				  </div>
				  <button type="button" class="submit-btn" aria-label="Close" (click)="SaveListName(d)">Done</button>
			
				</div>
			</div>
	
			
			
		</div>
		
	</ng-template>

	<ng-template #addNewItem let-c="close" let-d="dismiss">
		<div class="modal-header">
			<div class="modal-header-left">
				<h4 class="modal-title" id="modal-basic-title">Create List</h4>
			</div>
			<div class="modal-header-right">
				<p  class="close-box" aria-label="Close" (click)="d('Cross click')"><img src="assets/img/teambox/icon-close.svg"></p>
			</div>
		</div>
		
		<div class="modal-body addnewitem">
			
			<div class="addnewitem-content">
				<div class="addnewitem-content-left">
					<p>Filter</p>
					<div class="formrow">
						<input type="text" class="form-control select_box" placeholder="Type or select column">
					</div>
					<div class="applied_filter_popup">
					    <div class="item"><p>Phone No. Starts with +44</p></div>
						<div class="item"><span>And</span><p>Phone No. Does not Contain +91</p></div>
						<div class="item"><span>And</span><p>Filter Last Message Received Between 15 Jan 2022 to 20 Jan 2022</p></div>
						<div class="item"><span>OR</span><p>Filter Tag is Not Unpaid</p></div>
					</div>	

				</div>
				<div class="addnewitem-content-left filterby">
					<form [formGroup]="filterForm">  
					<p>Filter Phone No.</p>
					<div class="formrow">
						<p (click)="toggleFilterByOption()"  class="form-control select_box btn">Starts With</p>
						<div *ngIf="showFilterByOption" class="popup-dialog">
							<p (click)="toggleFilterByOption()"><span>Starts With</span></p>
							<p (click)="toggleFilterByOption()"><span>Does Not Contain</span></p>
							<p (click)="toggleFilterByOption()"><span>Last Message Received Between 15 Jan 2022 to 20 Jan 2022</span></p>
							<p (click)="toggleFilterByOption()"><span>Tag is Not Unpaid</span></p>
						</div>

					</div>
					<div class="addnewitem_content_inner">
						<p><span>Value</span></p>
						<div class="formrow">
							<input type="text" class="form-control" placeholder="+44">
						</div>
					</div>
					
	
					<div class="other_filters" *ngFor="let filter of filters().controls; let i=index; ;let last = last;" >
					<div class="addnewitem_content_inner">
								<div class="switchbtn">
									<p class="active">AND</p>
									<p>Or</p>
								</div>
						 </div>
						<div class="formrow">
							<p (click)="toggleFilterByOption()" class="form-control select_box btn">Does Not Contain</p>
							<div *ngIf="showFilterByOption" class="popup-dialog">
								<p (click)="toggleFilterByOption()"><span>Starts With</span></p>
								<p (click)="toggleFilterByOption()"><span>Does Not Contain</span></p>
								<p (click)="toggleFilterByOption()"><span>Last Message Received Between 15 Jan 2022 to 20 Jan 2022</span></p>
								<p (click)="toggleFilterByOption()"><span>Tag is Not Unpaid</span></p>
							</div>

						</div>
						<div class="addnewitem_content_inner">
							<p><span>Value</span></p>
							<div class="formrow">
							<input type="text" class="form-control" placeholder="+44">
							<span *ngIf="last"  (click)="addFilter()" class="add_filter">+ Add</span> <span class="remove_filter" (click)="removeFilter(i)">- Remove</span>
						</div>
						</div>
					</div>

				 <div *ngIf="filters().controls.length ==0" class="addnewitem_content_inner">
					<div class="formrow">
						<span (click)="addFilter()" class="add_filter">+ Add</span>
					</div>
				</div>

			</form>
				</div>
			</div>
			<div class="input_group_btn">
				  <button type="button" class="submit-btn" aria-label="Close" (click)="toggleapplyList(applyList,d)">Apply</button>
			</div>
	
		</div>
		
	</ng-template>
	
	<ng-template #applyList let-c="close" let-d="dismiss">
		<div class="modal-header">
			<div class="modal-header-left">
				<img class="icon" src="assets/img/campaign/back.svg" (click)="d('Cross click')"> 
				<input placeholder="Search" type="text" class="search-box" >
			</div>
			<div class="modal-header-right">
				
			</div>
		</div>
		<div class="modal-body applyList">
			<div class="applylist_filters_outer scroll-container">
			<div class="applylist_filters"  [ngStyle]="{width:applylistFiltersWidth}">
					<button type="button" class="submit-btn red-bg">Clear All</button>
					<div class="item"><p>Phone No. Starts with +44</p></div>
					<div class="item"><span>And</span><p>Phone No. Does not Contain +91</p></div>
					<div class="item"><span>OR</span><p>Filter Tag is Not Unpaid</p></div>
			</div>
		    </div>

			<div class="applylist_contnet">
				<table>
					<thead>
							<tr>
								<td>ID<img src="/assets/img/campaign/sort.svg"></td>
								<td>Name<img src="/assets/img/campaign/sort.svg"></td>
								<td>Phone Number<img src="/assets/img/campaign/sort.svg"></td>
								<td>Email<img src="/assets/img/campaign/sort.svg"></td>
								<td>Age<img src="/assets/img/campaign/sort.svg"></td>
								<td>Gender<img src="/assets/img/campaign/sort.svg"></td>
								<td>Tag<img src="/assets/img/campaign/sort.svg"></td>

							</tr>
						
					</thead>
					<tbody>
						<tr *ngFor='let in of counter(10) ;let i = index'>
							    <td>{{i}}</td>
								<td>John Applesssed</td>
								<td>+91 9874563210</td>
								<td>johnapp@yahoo.com</td>
								<td>42 Yrs</td>
								<td>Male</td>
								<td><span class="new"></span>New customer</td>
						</tr>
					</tbody>
				</table>
				<div class="pagination">
					<p class="prev"><img src="/assets/img/campaign/back.svg"></p>
					<p>1</p>
					<p class="current">2</p>
					<p>3</p>
					<p>4</p>
					<p class="next active"><img src="/assets/img/campaign/next.svg"></p>
				</div>

			


			<div class="input_group_btn">
			<button type="button" class="submit-btn" aria-label="Close" (click)="saveList(saveListModal)">Save & Use</button>
			</div>
		</div>
		</div>
	</ng-template>
	
	<ng-template #saveListModal let-c="close" let-d="dismiss">
		<div class="modal-header">
			<div class="modal-header-left">
				<h4 class="modal-title" id="modal-basic-title">Save List</h4>
			</div>
			<div class="modal-header-right">
				<p  class="close-box" aria-label="Close" (click)="d('Cross click')"><img src="assets/img/teambox/icon-close.svg"></p>
			</div>
		</div>
		<div class="modal-body saveListModal">
			
			<div class="formrow">
			<input class="form-control" type="text" placeholder="Enter a name" name="listName" />
			</div>
			<div class="input_group_btn">
			<button type="button" class="submit-btn" aria-label="Close" (click)="SaveListName(addNewCampaign)">Save & Use</button>
			</div>
	
			
			
		</div>
		
	</ng-template>

	<ng-template #openalertmessage let-c="close" let-d="dismiss">
		
		<div class="modal-body alertmessage">
			<p class="label">{{confirmMessage}}</p>
            <div class="input_group_btn">
			<button type="button" class="cancel-btn" aria-label="Close" (click)="d('Cross click')">Cancel</button>
			<button type="button" class="submit-btn red-bg" aria-label="Close" (click)="d('Cross click')">Yes, Delete</button>
			</div>
	
			
			
		</div>
		
	</ng-template>



</sb-layout-dashboard>
