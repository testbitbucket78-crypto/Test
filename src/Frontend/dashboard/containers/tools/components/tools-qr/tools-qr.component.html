<div class="custom-box-style p-3 w-100 rounded">
    <div>
        <h2>QR Code</h2>
        <p class="w-50">
            WhatsApp QR Code tool generates special QR code which automatically redirects customers
            to WhatsApp chat with your pre- defined message already filled.
        </p>
    </div>
    <div class="rounded border w-50 p-3">
        <h4>Generate QR</h4>
        <form [formGroup]="qrToolForm">
            <div class="w-100">
                <p class="mb-1">Channel</p>
                <sb-dropdown
                    [channelOption]="channelOption"
                    [channelSelected]="channelSelected"
                    [channelPhoneNumber]="channelPhoneNumber"
                    [ShowAssignOption]="ShowAssignOption"
                    [customWidth]="'100%'"
                    (selectionChange)="updateDropdown($event)"
                >
                </sb-dropdown>
            </div>
            <div class="mt-3">
                <div class="d-flex align-items-center">
                    <p class="mb-1">Custom Message</p>
                    <div class="mb-1 ml-1">
                        <sb-tooltip
                            [tooltipText]="
                                'This is a pre filled message when customer is redirected to WhatsApp'
                            "
                            [isVisible]="isTooltipVisible"
                            (visibilityChange)="handleTooltipChange($event)"
                        >
                        </sb-tooltip>
                    </div>
                </div>
                <input
                    id="custom-message-field"
                    class="p-1 common-input w-100 mb-4"
                    type="text"
                    placeholder="Hi, How can I assist you?"
                    formControlName="customMessage"
                />
            </div>
            <sb-button
                [disabled]="!(qrToolForm.get('channel')?.value  && qrToolForm.get('customMessage')?.value)"
                [label]="'Generate QR Code'"
                [type]="'primary'"
                [isActive]="true"
                [customWidth]="'100%'"
                (onClick)="generateLink()"
            >
            </sb-button>
        </form>
        <div *ngIf="generatedLink" class="d-flex align-items-center justify-content-center mt-4">
            <qrcode #qrCodeRef [qrdata]="generatedLink" [width]="256" [errorCorrectionLevel]="'M'"></qrcode>
        </div>
        <div *ngIf="generatedLink">
            <sb-button
            [disabled]="!(qrToolForm.get('channel')?.value  && qrToolForm.get('customMessage')?.value)"
            [label]="'Download QR Code'"
            [type]="'primary'"
            [isActive]="true"
            [customWidth]="'100%'"
            (onClick)="downloadQRCode()"
            >
            </sb-button>
        </div>
    </div>
</div>
