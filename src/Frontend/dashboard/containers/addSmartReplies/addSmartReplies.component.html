
  <sb-top-nav title="Smart Replies"> </sb-top-nav>
  <div class="bs-stepper">
    <div class="head d-flex">
     <div class="heading d-flex">Add Smart Reply
     </div>
     <button type="button" routerLink="/dashboard/smartReplies" class="btn-cross" aria-label="Close" id="close-btn"  (click)="('Cross click')">X</button>
    </div>
    <div class="bs-stepper-header" role="tablist">
     
      <div class="step" data-target="#logins-part">
        <button type="button" class="step-trigger" role="tab" aria-controls="logins-part" id="logins-part-trigger">
          <span class="bs-stepper-circle">1</span>
          <span class="bs-stepper-label">New Smart Reply</span>
        </button>
      </div>
      <div class="line"></div>
      <div class="step" data-target="#information-part">
        <button type="button" class="step-trigger" role="tab" aria-controls="information-part"
          id="information-part-trigger">
          <span class="bs-stepper-circle">2</span>
          <span class="bs-stepper-label">Keywords and Criteria</span>
        </button>
      </div>
      <div class="line"></div>
      <div class="step" data-target="#review-part">
        <button type="button" class="step-trigger" role="tab" aria-controls="review-part" id="review-part-trigger">
          <span class="bs-stepper-circle">3</span>
          <span class="bs-stepper-label">Reply Actions</span>
        </button>
      </div>
    </div>
    <div class="bs-stepper-content">
      <div id="logins-part" class="content" role="tabpanel" aria-labelledby="logins-part-trigger">
        <div class="box" [formGroup]="newReply">
          <h5>Title</h5>
          <input class="form-control" type="text" name="Title" id="Title" formControlName="Title"
            placeholder="Enter title in max 20 character" maxlength="20" />
          <h5>Description</h5>
          <div class="form-floating ff">
            <textarea name="Description" id="Description" class="form-control" rows="4" cols="50"
            placeholder="Enter description in max 80 character"  formControlName="Description" maxlength="80" ></textarea>
            
          </div>
        </div>
        <button type="button" (click)="next()" (click)="getNewSmartReplyData()" class="btn5 btn-block col-1 mt-3 ">Next</button>

      </div>
         <div id="information-part" class="content" role="tabpanel" aria-labelledby="information-part-trigger">
        <button type="button" (click)="previous()" class="btn9 btn-block col-1 mt-3 "><img
            src="assets/img/prev.png"></button>
        <div class="box1" >
          <h5>Add Keyword</h5>
          <div class="box2 d-flex" data-required="Use enter key to add ‚û•">
            <input class="form-control" #keyowrdtxt [(ngModel)]="keyword" type="text" placeholder="Enter Keywords" maxlength="56" />
            <button type="button" class="btn7 btn-block ml-2" (click)="addKeyword()" [disabled]="keyword === ''">ADD</button>
          </div>
          <div *ngIf="keyword.length > 56" class="text-danger mt-2"></div>
          
        
        <span>Please choose a unique keyword which is not already added in other smart replies </span>
          <span class="row">
          <div  *ngFor="let k of keywords" class="keywords"style="font-weight: bolder; color: black;"> 
            <div class="keytext">{{k}}<button class="rmv-btn" (click)="removeKeyword(k)">x</button></div> 
           
          </div>
        </span>
          <div class="line1"></div>
          <h4 id="line1-h4">Matching Criteria</h4>
          <div class="ll d-flex">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="exampleRadios" value="Fuzzy matching"
                (change)="onSelectionChange('Fuzzy matching')">
              <label class="form-check-label" for="exampleRadios1">
                Fuzzy matching
              </label>
              <img id="detail" class="form-check-label-img" src="assets/img/info.png" (click)="onClickFuzzy($event)">
            </div>
            <div class="desc-radio-input" *ngIf="showBox">
              <p id="p-title">Fuzzy Matching</p>
              <p id="p-body">As long as the message contains a <br />certain % of the Keyword. You can also<br /> set emojis as your keyword.</p>
              <button id="radio-close-btn" (click)="showBox=false">X</button>
            </div>
            <div class="form-check">
              <input type="radio" class="form-check-input" value=" Exact matching" name="exampleRadios"
                (change)="onSelectionChange('Exact matching')">
              <label class="form-check-label" for="">
                Exact matching
              </label>
              <img id="detail" class="form-check-label-img" src="assets/img/info.png" (click)="onClickExact($event)">
            </div>
              <div class="desc-radio-input-1" *ngIf="showBox1">
              <p id="p-title">Exact Matching</p>
              <p id="p-body">As long as the message contains a <br />exact Keyword. You can also<br /> set emojis as your keyword.</p>
              <button id="radio-close-btn" (click)="showBox1=false">X</button>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="exampleRadios" value="contains"
                (change)="onSelectionChange('contains')">
              <label class="form-check-label" for="">
                Contains
              </label>
              <img id="detail" class="form-check-label-img" src="assets/img/info.png" (click)="onClickContains($event)">
            </div>

             <div class="desc-radio-input-2" *ngIf="showBox2">
              <p id="p-title">Contains</p>
              <p id="p-body">As long as the message contains a <br />Keyword. You can also<br /> set emojis as your keyword.</p>
              <button id="radio-close-btn" (click)="showBox2=false">X</button>
            </div>
             

          </div>
        </div>
        <button type="button" (click)="next()" (click)="sendNewSmartReply()" class="btn5 btn-block col-1 mt-3 ">Next</button>

      </div>
      <div id="review-part" class="content" role="tabpanel" aria-labelledby="review-part-trigger">
        <button type="button" (click)="previous()" class="btn9 btn-block col-1 mt-3 "><img
            src="assets/img/prev.png"></button>


         <div class="interactions">
            <div class="child-interaction-1">
              <div *ngFor="let message of assignedAgentList; let i = index">
                <div class="message-box" *ngIf="message.isMessage">
                <p id="msgbox-head">Message</p>
                <p id="msgbox-body" [contentEditable]="isEditable" (input)="onEdit($event.target.innerHTML)" [innerHTML]="message.value"></p>
                <button class="msg-edit-btn" (click)="toggleEditable(i)"><img src="assets/img/edit.png"></button>
                <button class="msg-del-btn" (click)="removeMessage(i)"><img src="assets/img/delete.png"></button>
                </div>
                   <div class="assign-conversation" *ngIf="!message.isMessage">
                <p id="msgbox-head1">Action</p>
                <div class="d-flex assign-container">
                <p id="msgbox-body1"><b>Conversation Assigned:</b></p>
                <p id="msgbox-body2" [contentEditable]="isEditable" (input)="onActionEdit($event.target.innerHTML)">{{message.value}}</p>
                </div>
                   <button class="msg-edit-btn" (click)="toggleEditable(i)"><img src="assets/img/edit.png"></button>
                   <button class="msg-del-btn" (click)="removeAction(i)"><img src="assets/img/delete.png"></button>
              
             
              </div>
       
              </div>
                 <div *ngFor="let tag of assignAddTag; let i = index" (click)="toggleAddTag()">
                <div class="add-tag" *ngIf="!tag.isTag">
                <p id="msgbox-head1">Action</p>
                <div class="d-flex assign-container">
                <p id="msgbox-body1"><b>Add Tags:</b></p>
                <p id="msgbox-body2" >{{tag.value}}</p>
                </div>
                   <button class="msg-edit-btn" (click)="toggleRemoveTag()"><img src="assets/img/edit.png"></button>
                   <button class="msg-del-btn" (click)="removeAddTag(i)"><img src="assets/img/delete.png"></button>
              
             
              </div>
              </div>

              <!-- <div class="update-name" *ngIf="ShowNameUpdate">
                <p id="msgbox-head1">Action</p>
                <div class="d-flex assign-container">
                <p id="msgbox-body1"><b>Name Update</b></p>
                </div>
                   <button class="msg-edit-btn" (click)="toggleEditable(i)"><img src="assets/img/edit.png"></button>
                   <button class="msg-del-btn" (click)="removeAction(i)"><img src="assets/img/delete.png"></button>
              
             
              </div>

               <div class="resolve-conversation" *ngIf="ShowResolveConversation">
                <p id="msgbox-head1">Action</p>
                <div class="d-flex assign-container">
                <p id="msgbox-body1"><b>Communicataion Resolved</b></p>
                </div>
                   <button class="msg-edit-btn" (click)="toggleEditable(i)"><img src="assets/img/edit.png"></button>
                   <button class="msg-del-btn" (click)="removeAction(i)"><img src="assets/img/delete.png"></button>
              
             
              </div> -->
            </div>

            <div class="child-interaction-2">
    
	             	<div class="conversation_inout_area">
			
                  <div class="input-area">
                  <ejs-richtexteditor [(value)]="custommesage" id='defaultRTE' #chatEditor [toolbarSettings]='tools' [width]='0' (click)="resetMessageTex()"></ejs-richtexteditor>
                  
                  
                  <div *ngIf="showEmoji" class="popup-dialog" >
                    <div class="tabs">
                      <div [ngClass]="EmojiType=='smiley' ? 'char_block active' : 'char_block'"  (click)="showEmojiType('smiley')">üòÄ</div>
                      <div [ngClass]="EmojiType=='animal' ? 'char_block active' : 'char_block'"  (click)="showEmojiType('animal')">üêµ</div>
                    </div>
                    <div *ngIf="EmojiType == 'smiley'" class="rteEmoticons" >
                      <div (click)="onInsert($event)" *ngFor="let smiley of smileys" class='char_block' title={{smiley.title}} [innerHTML]="smiley.content"></div>
                    </div>
                    <div *ngIf="EmojiType == 'animal'" class="rteEmoticons">
                      <div (click)="onInsert($event)" *ngFor="let animal of animals" class='char_block' title={{animal.title}} [innerHTML]="animal.content"></div>
                    </div>
                  </div>
                  <button class="submit_btn" (click)="addMessage()" >Add</button>
                    </div>
                </div>

              <button id="add-action-dropdown" type="button" (click)="toggleAddActions()"><img src="assets/img/teambox/add.svg">Add Action</button>
            </div>

            <div *ngIf="ShowAssignOption" class="popup-dialog AssignOption">
              <p  class="label">Assign To</p>
              <p  *ngFor="let agent of agentsList; let k = index" (click)="assignConversation(k)" (click)="closeAssignOption()" >
                <span ><img class="thumbnail" src="/assets/img/teambox/Richie_1.png" />{{agent}}</span>
              </p>
            </div>

            <div *ngIf="ShowAddAction" class="popup-dialog AssignAction">
              <p class="label">Add Action</p>
              <p *ngFor="let assignAction of assignActionList; let m = index" (click)="toggleAssignOption(m)">
                <span >{{assignAction}}</span>
              </p>
            </div>


<!--             
               	<div *ngIf="AutoReplyOption" class="popup-dialog autoreply">
                  <p class="label">Pause Auto Replies</p>
						
							<p  *ngFor="let option of AutoReplyEnableOption; let n = index" (click)="toggleAutoReply()">
								<span>{{option}}</span>
							</p>
					
						
						</div> -->

              <div *ngIf="ShowAddTag"  class="popup-dialog AddTag">
                 <p class="label">Add Tag</p>
                
                <div class="addTag d-flex" *ngFor="let AddTag of addTagList;let i = index" (click)="addTags(i)" (click)="toggleAddTag()">
                 <input  [checked]="AddTag.status" type="checkbox" name="tags" class="form-control-checkbox ml-2" value="{{AddTag.value}}" (change)="addTags($event)"/>
                 <div class="color-dots"></div>   
                 <span>{{AddTag}}</span>
                 </div>
               </div>

              <div *ngIf="ShowRemoveTag"  class="popup-dialog RemoveTag">
                 <p class="label">Remove Tag</p>

                  
                <div class="removeTag d-flex" *ngFor="let RemoveTag of addTagList;let m = index"> 
                  <input  [checked]="RemoveTag.status" type="checkbox" name="tags" class="form-control-checkbox ml-2" value="{{RemoveTag.value}}" (click)="addTags($event)"/>
                  <div class="color-dots"></div>
                  <span>{{RemoveTag}}</span>
                 </div>
               </div>

         </div>


          <button type="button" (click)="next()" class="btn5 btn-block col-1 mt-3 ">Save</button>
      
      </div>
    </div>
  </div>




